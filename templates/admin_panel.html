{% extends 'layout_dark.html' %}

{% block content %}
<div class="container pt-6 px-0-mobile mx-0-mobile">
  <div class="columns is-centered mt-6">
    <div class="column is-5-desktop is-6-tablet is-10-mobile center">
      <div class="card px-4 py-4 ">
        <div class="card-content">

          <form action="{{ url_for('upload') }} " class="form" method="post" enctype="multipart/form-data">
            <label class="label">Exam date:</label>
            <div class="select mr-3">
              <select name="examMonth" id="examMonth">
                {% for examMonth in examMonths %}
                <option value="{{ examMonth }}">{{ examMonth }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="select">
              <select name="examMonth" id="examMonth">
                {% for examYear in examYears %}
                <option value="{{ examYear }}">{{ examYear }}</option>
                {% endfor %}
              </select>
            </div>

            <label for="year" class="label mt-2">Year:</label>
            <div class="select">
              <select name="year" id="year">
                {% for year in years %}
                <option value="{{ year }}">{{ year }}</option>
                {% endfor %}
              </select>
            </div>

            <label for="sem" class="label mt-2">Semester:</label>
            <div class="select">
              <select name="sem" id="sem">
                {% for sem in sems %}
                <option value="{{ sem }}">{{ sem }}</option>
                {% endfor %}
              </select>
            </div>

            <label class="label mt-2">Examination:</label>
            <div class="control">
              <label class="radio">
                <input type="radio" name="regOrSup" value="regular" required>
                Regular
              </label>
              <label class="radio">
                <input type="radio" name="regOrSup" value="supplementary" required>
                Supplementary
              </label>
            </div>

            <div id="file-js" class="file has-name mt-5 is-info">
              <label class="file-label">
                <input class="file-input" type="file" name="results" required>
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label">
                    Choose a CSV fileâ€¦
                  </span>
                </span>
                <span class="file-name">
                  No file uploaded
                </span>
              </label>
            </div>
            {% if error %}
            <p class="has-text-danger pt-5 has-text-centered">Invalid File</p>
            {% elif success %}
            <p class="has-text-success pt-5 has-text-centered">File</p>
            {% endif %}
            <div class="has-text-right">
              <input type="submit" class="mt-6 button is-info">
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>



<script>
  const fileInput = document.querySelector('#file-js input[type=file]');
  fileInput.onchange = () => {
    if (fileInput.files.length > 0) {
      const fileName = document.querySelector('#file-js .file-name');
      fileName.textContent = fileInput.files[0].name;
    }
  }
</script>
{% endblock content %}